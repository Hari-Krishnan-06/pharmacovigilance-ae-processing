{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Harikrishnan.balasub/Desktop/Graduation/pharmacovigilance/pv-frontend/app/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect } from \"react\";\nimport { useRouter } from \"next/navigation\";\n\nconst API_BASE =\n  process.env.NEXT_PUBLIC_API_BASE_URL || \"http://127.0.0.1:8000\";\n\nexport default function Home() {\n  const router = useRouter();\n\n  // ===== AUTH STATE ===== (SECURITY FIXED)\n  const [currentUser, setCurrentUser] = useState<any>(null);\n  const [authChecking, setAuthChecking] = useState(true);\n\n  // Check authentication on mount\n  useEffect(() => {\n    const checkAuth = async () => {\n      const token = localStorage.getItem(\"access_token\"); // ‚úÖ FIXED: consistent naming\n\n      if (!token) {\n        router.replace(\"/login\"); // ‚úÖ FIXED: use replace, not push\n        return;\n      }\n\n      try {\n        // ‚úÖ FIXED: Proper Bearer token authentication (no token in URL!)\n        const res = await fetch(`${API_BASE}/api/auth/me`, {\n          headers: {\n            Authorization: `Bearer ${token}`,\n          },\n        });\n\n        if (!res.ok) throw new Error(\"Invalid token\");\n\n        const data = await res.json();\n        setCurrentUser(data.user);\n      } catch {\n        // Token invalid, clear and redirect\n        localStorage.removeItem(\"access_token\");\n        router.replace(\"/login\"); // ‚úÖ FIXED: use replace\n      } finally {\n        setAuthChecking(false);\n      }\n    };\n\n    checkAuth();\n  }, [router]);\n\n  // Logout handler\n  const handleLogout = () => {\n    localStorage.removeItem(\"access_token\"); // ‚úÖ FIXED: consistent naming\n    router.replace(\"/login\"); // ‚úÖ FIXED: use replace\n  };\n\n  // ===== TAB STATE =====\n  const [activeTab, setActiveTab] = useState<\"manual\" | \"pdf\">(\"manual\");\n\n  // ===== MANUAL TEXT INPUT STATES =====\n  const [drug, setDrug] = useState(\"\");\n  const [event, setEvent] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  // ===== PDF UPLOAD STATES =====\n  const [pdfFile, setPdfFile] = useState<File | null>(null);\n  const [pdfDrugName, setPdfDrugName] = useState(\"\");\n  const [pdfUploading, setPdfUploading] = useState(false);\n  const [pdfError, setPdfError] = useState<string | null>(null);\n\n  // ===== SHARED RESULTS STATES =====\n  const [result, setResult] = useState<any>(null);\n  const [similar, setSimilar] = useState<any[]>([]);\n\n  // ===== SELECTED EVENT STATE =====\n  const [selectedEvent, setSelectedEvent] = useState<any | null>(null);\n\n  // ===== DRUG AUTOCOMPLETE STATES =====\n  const [drugSuggestions, setDrugSuggestions] = useState<string[]>([]);\n  const [showSuggestions, setShowSuggestions] = useState(false);\n\n  // Download Handler\n  const handleDownload = () => {\n    if (!result) return;\n\n    const content = `\n=================================================\nPHARMACOVIGILANCE CASE REPORT\n=================================================\n\nCase Report ID: ${result.report_id}\nDrug: ${result.drugname}\n\nAdverse Event:\n${result.adverse_event}\n\n=================================================\nANALYSIS RESULTS\n=================================================\n\nSeriousness: ${result.classification.prediction}\nML Probability: ${(result.classification.serious_probability * 100).toFixed(1)}%\nRisk Level: ${result.escalation.risk_level}\nEscalation Required: ${result.escalation.should_escalate ? \"YES\" : \"NO\"}\n\nTriggered Keywords: ${result.escalation.triggered_keywords.length > 0\n        ? result.escalation.triggered_keywords.join(\", \")\n        : \"None\"}\n\n=================================================\nPHI-3 MEDICAL REASONING ANALYSIS\n=================================================\n\n${result.phi3_reasoning ? `\nReasoning Alignment: ${result.phi3_reasoning.reasoning_alignment}\nCertainty Level: ${result.phi3_reasoning.reasoning_certainty}\n\nMedical Reasoning:\n${result.phi3_reasoning.reasoning}\n\nKey Medical Factors:\n${result.phi3_reasoning.key_factors.map((f: string) => `- ${f}`).join('\\n')}\n\nHuman Review Needed: ${result.needs_human_review ? \"YES\" : \"NO\"}\n${result.review_reason ? `Review Reason: ${result.review_reason}` : ''}\n` : \"Phi-3 reasoning not available\"}\n\n=================================================\nAI CLINICAL SUMMARY\n=================================================\n\n${result.explanation || \"N/A\"}\n\n=================================================\nFDA DRUG INFORMATION\n=================================================\n\n${result.drug_info ? `\nSource: ${result.drug_info.source}\n\nINDICATIONS:\n${result.drug_info.indications}\n\nWARNINGS:\n${result.drug_info.warnings}\n\nADVERSE REACTIONS:\n${result.drug_info.adverse_reactions}\n` : \"Not available\"}\n\n=================================================\nSIMILAR HISTORICAL CASES\n=================================================\n\n${similar.length > 0\n        ? similar.map((s, i) => `\nCase ${i + 1}: ${s.report_id}\nDrug: ${s.drugname || result.drugname}\nAdverse Event: ${s.adverse_event}\n---\n`).join('\\n')\n        : \"No similar cases found.\"}\n\nGenerated: ${new Date().toLocaleString()}\n`;\n\n    const blob = new Blob([content], { type: \"text/plain\" });\n    const url = URL.createObjectURL(blob);\n\n    const a = document.createElement(\"a\");\n    a.href = url;\n    a.download = `${result.report_id}.txt`;\n    a.click();\n\n    URL.revokeObjectURL(url);\n  };\n\n  // FLOW A: MANUAL TEXT ANALYSIS\n  const handleAnalyze = async () => {\n    if (!drug || !event) {\n      setError(\"Please enter both drug name and adverse event.\");\n      return;\n    }\n\n    setLoading(true);\n    setError(null);\n    setResult(null);\n    setSimilar([]);\n\n    try {\n      const res = await fetch(`${API_BASE}/api/process`, {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({\n          drugname: drug,\n          adverse_event: event,\n        }),\n      });\n\n      if (!res.ok) throw new Error(await res.text());\n\n      const data = await res.json();\n\n      console.log(\"API Response:\", data);\n      console.log(\"Similar Events:\", data.similar_events);\n      console.log(\"Drug Info:\", data.drug_info);\n      console.log(\"Phi-3 Reasoning:\", data.phi3_reasoning);\n\n      setResult(data);\n\n      if (data.similar_events && data.similar_events.length > 0) {\n        setSimilar(data.similar_events);\n      } else {\n        setSimilar([]);\n      }\n    } catch (err) {\n      console.error(err);\n      setError(\"Failed to call backend API.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // FLOW B: PDF UPLOAD + ML ANALYSIS\n  const handlePdfAnalyze = async () => {\n    if (!pdfFile) {\n      setPdfError(\"Please select a PDF file.\");\n      return;\n    }\n\n    setPdfUploading(true);\n    setPdfError(null);\n    setResult(null);\n    setSimilar([]);\n\n    try {\n      const formData = new FormData();\n      formData.append(\"file\", pdfFile);\n\n      if (pdfDrugName.trim()) {\n        formData.append(\"drugname\", pdfDrugName.trim());\n      }\n\n      const res = await fetch(`${API_BASE}/api/process-pdf`, {\n        method: \"POST\",\n        body: formData,\n      });\n\n      if (!res.ok) {\n        const errorText = await res.text();\n        throw new Error(errorText);\n      }\n\n      const data = await res.json();\n\n      console.log(\"PDF API Response:\", data);\n      console.log(\"Similar Events:\", data.similar_events);\n      console.log(\"Drug Info:\", data.drug_info);\n      console.log(\"Phi-3 Reasoning:\", data.phi3_reasoning);\n\n      setResult(data);\n\n      if (data.similar_events && data.similar_events.length > 0) {\n        setSimilar(data.similar_events);\n      } else {\n        setSimilar([]);\n      }\n\n      setPdfError(null);\n    } catch (err: any) {\n      console.error(err);\n\n      if (err.message.includes(\"could not be detected\")) {\n        setPdfError(\n          \"Drug name could not be auto-detected. Please enter it manually above and try again.\"\n        );\n      } else {\n        setPdfError(\"Failed to process PDF: \" + err.message);\n      }\n    } finally {\n      setPdfUploading(false);\n    }\n  };\n\n  // Get risk level color\n  const getRiskColor = (level: string) => {\n    switch (level) {\n      case \"CRITICAL\":\n        return \"bg-red-600\";\n      case \"HIGH\":\n        return \"bg-orange-500\";\n      case \"MEDIUM\":\n        return \"bg-yellow-500\";\n      default:\n        return \"bg-green-500\";\n    }\n  };\n\n  // Get reasoning alignment color\n  const getReasoningColor = (alignment: string) => {\n    switch (alignment) {\n      case \"SUPPORTS\":\n        return \"bg-green-100 text-green-800 border-green-300\";\n      case \"CHALLENGES\":\n        return \"bg-orange-100 text-orange-800 border-orange-300\";\n      case \"UNAVAILABLE\":\n      case \"UNKNOWN\":\n        return \"bg-gray-100 text-gray-800 border-gray-300\";\n      default:\n        return \"bg-gray-100 text-gray-800 border-gray-300\";\n    }\n  };\n\n  // Show loading while checking auth\n  if (authChecking) {\n    return (\n      <main className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto\"></div>\n          <p className=\"mt-4 text-gray-600\">Loading...</p>\n        </div>\n      </main>\n    );\n  }\n\n  // Don't render if not authenticated\n  if (!currentUser) {\n    return null;\n  }\n\n  return (\n    <main className=\"min-h-screen bg-gray-50 p-6\">\n      <div className=\"max-w-7xl mx-auto space-y-6\">\n        {/* Header */}\n        <div className=\"bg-white rounded-lg shadow-sm p-6\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <h1 className=\"text-3xl font-bold text-gray-900\">\n                Pharmacovigilance Analysis\n              </h1>\n              <p className=\"text-gray-600 mt-1\">\n                Analyze adverse event reports for safety assessment.\n              </p>\n            </div>\n            <div className=\"flex items-center gap-4\">\n              {currentUser && (\n                <span className=\"text-sm text-gray-600\">\n                  Welcome, <span className=\"font-semibold\">{currentUser.username}</span>\n                </span>\n              )}\n              <button\n                onClick={() => router.push(\"/audit\")}\n                className=\"bg-gray-800 text-white px-4 py-2 rounded-md hover:bg-gray-900 transition\"\n              >\n                View Audit Logs\n              </button>\n              <button\n                onClick={handleLogout}\n                className=\"bg-red-500 text-white px-4 py-2 rounded-md hover:bg-red-600 transition\"\n              >\n                Logout\n              </button>\n            </div>\n          </div>\n        </div>\n\n        {/* Input Section with Tabs */}\n        <div className=\"bg-white rounded-lg shadow-sm\">\n          {/* Tabs */}\n          <div className=\"border-b border-gray-200\">\n            <div className=\"flex space-x-1 p-1\">\n              <button\n                onClick={() => setActiveTab(\"manual\")}\n                className={`px-6 py-3 text-sm font-medium rounded-t-lg transition ${activeTab === \"manual\"\n                    ? \"bg-blue-600 text-white\"\n                    : \"bg-gray-100 text-gray-700 hover:bg-gray-200\"\n                  }`}\n              >\n                Enter Information\n              </button>\n              <button\n                onClick={() => setActiveTab(\"pdf\")}\n                className={`px-6 py-3 text-sm font-medium rounded-t-lg transition ${activeTab === \"pdf\"\n                    ? \"bg-blue-600 text-white\"\n                    : \"bg-gray-100 text-gray-700 hover:bg-gray-200\"\n                  }`}\n              >\n                Upload PDF\n              </button>\n            </div>\n          </div>\n\n          {/* Tab Content */}\n          <div className=\"p-6\">\n            {activeTab === \"manual\" ? (\n              <div className=\"space-y-6\">\n                <div className=\"relative\">\n                  <label className=\"block text-sm font-semibold text-gray-900 mb-2\">\n                    Drug Name\n                  </label>\n                  <input\n                    type=\"text\"\n                    className=\"w-full border border-gray-300 rounded-md p-3 text-gray-900 focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                    placeholder=\"Amoxicillin\"\n                    value={drug}\n                    onChange={async (e) => {\n                      const value = e.target.value;\n                      setDrug(value);\n\n                      if (value.length < 2) {\n                        setDrugSuggestions([]);\n                        setShowSuggestions(false);\n                        return;\n                      }\n\n                      try {\n                        const res = await fetch(\n                          `${API_BASE}/api/drugs/suggest?q=${value}`\n                        );\n                        const data = await res.json();\n                        setDrugSuggestions(data.suggestions || []);\n                        setShowSuggestions(true);\n                      } catch {\n                        setDrugSuggestions([]);\n                        setShowSuggestions(false);\n                      }\n                    }}\n                  />\n                  {showSuggestions && drugSuggestions.length > 0 && (\n                    <ul className=\"border border-gray-300 rounded-md mt-1 bg-white max-h-48 overflow-y-auto shadow-md absolute w-full z-10\">\n                      {drugSuggestions.map((name, idx) => (\n                        <li\n                          key={idx}\n                          className=\"px-4 py-2 hover:bg-blue-100 cursor-pointer text-sm\"\n                          onClick={() => {\n                            setDrug(name);\n                            setShowSuggestions(false);\n                          }}\n                        >\n                          {name}\n                        </li>\n                      ))}\n                    </ul>\n                  )}\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-semibold text-gray-900 mb-2\">\n                    Adverse Event Description\n                  </label>\n                  <textarea\n                    className=\"w-full border border-gray-300 rounded-md p-3 text-gray-900 focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                    rows={4}\n                    placeholder=\"Patient developed severe fatigue, nausea, dark urine, and jaundice after 10 days of Amoxicillin therapy.\"\n                    value={event}\n                    onChange={(e) => setEvent(e.target.value)}\n                  />\n                </div>\n\n                <button\n                  onClick={handleAnalyze}\n                  disabled={loading}\n                  className=\"bg-blue-600 text-white px-6 py-3 rounded-md font-medium hover:bg-blue-700 disabled:bg-gray-400 transition\"\n                >\n                  {loading ? \"Analyzing...\" : \"Analyze Report\"}\n                </button>\n\n                {error && (\n                  <div className=\"bg-red-50 border border-red-200 rounded-md p-3\">\n                    <p className=\"text-red-700 text-sm\">{error}</p>\n                  </div>\n                )}\n              </div>\n            ) : (\n              <div className=\"space-y-6\">\n                <div>\n                  <label className=\"block text-sm font-semibold text-gray-900 mb-2\">\n                    Drug Name (Optional - Auto-detected)\n                  </label>\n                  <input\n                    type=\"text\"\n                    className=\"w-full border border-gray-300 rounded-md p-3 text-gray-900 focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                    placeholder=\"Leave blank for auto-detection\"\n                    value={pdfDrugName}\n                    onChange={(e) => setPdfDrugName(e.target.value)}\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-semibold text-gray-900 mb-2\">\n                    Select PDF File\n                  </label>\n                  <input\n                    type=\"file\"\n                    accept=\"application/pdf\"\n                    onChange={(e) => setPdfFile(e.target.files?.[0] || null)}\n                    className=\"w-full border border-gray-300 rounded-md p-3 text-gray-900\"\n                  />\n                </div>\n\n                <button\n                  onClick={handlePdfAnalyze}\n                  disabled={pdfUploading || !pdfFile}\n                  className=\"bg-blue-600 text-white px-6 py-3 rounded-md font-medium hover:bg-blue-700 disabled:bg-gray-400 transition\"\n                >\n                  {pdfUploading ? \"Processing PDF...\" : \"Analyze Report\"}\n                </button>\n\n                {pdfError && (\n                  <div className=\"bg-red-50 border border-red-200 rounded-md p-3\">\n                    <p className=\"text-red-700 text-sm\">{pdfError}</p>\n                  </div>\n                )}\n              </div>\n            )}\n          </div>\n        </div>\n\n        {/* Results Section */}\n        {result && (\n          <>\n            <h2 className=\"text-2xl font-bold text-gray-900\">\n              ANALYSIS RESULTS\n            </h2>\n\n            <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\n              {/* Left Column - Summary & Analysis */}\n              <div className=\"lg:col-span-2 space-y-6\">\n                {/* Human Review Alert (if needed) */}\n                {result.needs_human_review && (\n                  <div className=\"bg-yellow-50 border-l-4 border-yellow-400 p-4 rounded-r-lg\">\n                    <div className=\"flex\">\n                      <div className=\"flex-shrink-0\">\n                        <span className=\"text-yellow-400 text-2xl\">‚ö†Ô∏è</span>\n                      </div>\n                      <div className=\"ml-3\">\n                        <h3 className=\"text-sm font-bold text-yellow-800\">\n                          HUMAN REVIEW RECOMMEND\n                        </h3>\n                        <p className=\"mt-1 text-sm text-yellow-700\">\n                          {result.review_reason || \"This case requires human review\"}\n                        </p>\n                      </div>\n                    </div>\n                  </div>\n                )}\n\n                {/* Pharmacovigilance Summary Card */}\n                <div className=\"bg-white rounded-lg shadow-sm p-6\">\n                  <h3 className=\"text-lg font-bold text-gray-900 mb-4\">\n                    PHARMACOVIGILANCE SUMMARY\n                  </h3>\n\n                  <div className=\"space-y-2 text-sm\">\n                    <div className=\"flex\">\n                      <span className=\"font-semibold text-gray-700 w-48\">\n                        CASE REPORT ID:\n                      </span>\n                      <span className=\"text-gray-900\">\n                        {result.report_id}\n                      </span>\n                    </div>\n                    <div className=\"flex\">\n                      <span className=\"font-semibold text-gray-700 w-48\">\n                        SUSPECTED DRUG:\n                      </span>\n                      <span className=\"text-gray-900\">{result.drugname}</span>\n                    </div>\n                    <div className=\"flex\">\n                      <span className=\"font-semibold text-gray-700 w-48\">\n                        ADVERSE EVENT:\n                      </span>\n                      <span className=\"text-gray-900\">\n                        {result.adverse_event.substring(0, 100)}...\n                      </span>\n                    </div>\n                    <div className=\"flex\">\n                      <span className=\"font-semibold text-gray-700 w-48\">\n                        SERIOUS ASSESSMENT :\n                      </span>\n                      <span className=\"text-gray-900 font-semibold\">\n                        {result.classification.prediction}\n                      </span>\n                    </div>\n                  </div>\n                </div>\n\n                {/* Three Column Cards */}\n                <div className=\"grid grid-cols-3 gap-4\">\n                  {/* Risk Level */}\n                  <div className=\"bg-white rounded-lg shadow-sm p-6 text-center\">\n                    <h4 className=\"text-sm font-semibold text-gray-700 mb-3\">\n                      RISK LEVEL\n                    </h4>\n                    <div\n                      className={`${getRiskColor(\n                        result.escalation.risk_level\n                      )} text-white px-4 py-2 rounded-full font-bold text-lg inline-block mb-3`}\n                    >\n                      {result.escalation.risk_level}\n                    </div>\n                    <div className=\"text-sm text-gray-600 mb-4\">\n                      {result.escalation.should_escalate\n                        ? \"Escalation Required\"\n                        : \"No Escalation\"}\n                    </div>\n                    <div className=\"w-full bg-gray-200 rounded-full h-3 mb-2\">\n                      <div\n                        className=\"bg-gradient-to-r from-green-400 via-yellow-400 to-red-500 h-3 rounded-full\"\n                        style={{\n                          width: `${result.escalation.final_score * 100}%`,\n                        }}\n                      />\n                    </div>\n                    <div className=\"text-xs text-gray-600 flex justify-between\">\n                      <span>\n                        Confidence:{\" \"}\n                        {(result.classification.confidence * 100).toFixed(0)}%\n                      </span>\n                    </div>\n                  </div>\n\n                  {/* ML Prediction */}\n                  <div className=\"bg-white rounded-lg shadow-sm p-6 text-center\">\n                    <h4 className=\"text-sm font-semibold text-gray-700 mb-3\">\n                      ML PREDICTION\n                    </h4>\n                    <div className=\"text-3xl font-bold text-gray-900\">\n                      {result.classification.prediction}\n                    </div>\n                  </div>\n\n                  {/* Quick Stats */}\n                  <div className=\"bg-white rounded-lg shadow-sm p-6\">\n                    <h4 className=\"text-sm font-semibold text-gray-700 mb-3\">\n                      QUICK STATS\n                    </h4>\n                    <div className=\"space-y-3\">\n                      {similar.length > 0 ? (\n                        <>\n                          <div className=\"flex items-center gap-2 text-sm\">\n                            <span className=\"text-gray-400\">üìÑ</span>\n                            <span className=\"text-gray-700\">\n                              <span className=\"font-bold text-gray-900\">{similar.length}</span> similar case(s)\n                            </span>\n                          </div>\n\n                          {similar.some((s) => s.risk_level) && (\n                            <div className=\"flex items-center gap-2 text-sm\">\n                              <span className=\"text-gray-400\">‚ö†Ô∏è</span>\n                              <span className=\"text-gray-700\">\n                                <span className=\"font-bold text-gray-900\">\n                                  {\n                                    similar.filter(\n                                      (s) => s.risk_level === \"CRITICAL\" || s.risk_level === \"HIGH\"\n                                    ).length\n                                  }\n                                </span>{\" \"}\n                                high-risk\n                              </span>\n                            </div>\n                          )}\n\n                          {similar.some((s) => s.ml_probability) && (\n                            <div className=\"flex items-center gap-2 text-sm\">\n                              <span className=\"text-gray-400\">üìä</span>\n                              <span className=\"text-gray-700\">\n                                Avg:{\" \"}\n                                <span className=\"font-bold text-gray-900\">\n                                  {(\n                                    (similar.reduce(\n                                      (sum, s) => sum + (s.ml_probability || 0),\n                                      0\n                                    ) /\n                                      similar.length) *\n                                    100\n                                  ).toFixed(1)}\n                                  %\n                                </span>\n                              </span>\n                            </div>\n                          )}\n                        </>\n                      ) : result.escalation.should_escalate ? (\n                        <div className=\"text-sm text-gray-500 italic\">\n                          NO SIMILAR CASES FOUND\n                        </div>\n                      ) : (\n                        <div className=\"text-sm text-gray-500 italic\">\n                          ONLY FOR ESCALATED ISSUES\n                        </div>\n                      )}\n                    </div>\n                  </div>\n                </div>\n\n                {/* Phi-3 Medical Reasoning Card */}\n                {result.phi3_reasoning && (\n                  <div className=\"bg-gradient-to-br from-purple-50 to-indigo-50 rounded-lg shadow-sm p-6 border border-purple-100\">\n                    <h3 className=\"text-lg font-bold text-gray-900 mb-4 flex items-center gap-2\">\n                      <span className=\"text-purple-600\"></span>\n                      MEDICAL REASONING ANALYSIS\n                    </h3>\n\n                    {/* Reasoning Alignment Badge */}\n                    <div className=\"mb-4\">\n                      <div className=\"text-sm font-semibold text-gray-700 mb-2\">\n                        REASONING ALLIGNMENT\n                      </div>\n                      <div\n                        className={`inline-flex items-center gap-2 px-4 py-2 rounded-lg border font-bold text-sm ${getReasoningColor(\n                          result.phi3_reasoning.reasoning_alignment\n                        )}`}\n                      >\n                        {result.phi3_reasoning.reasoning_alignment === \"SUPPORTS\" && \"‚úÖ\"}\n                        {result.phi3_reasoning.reasoning_alignment === \"CHALLENGES\" && \"‚ö†Ô∏è\"}\n                        {(result.phi3_reasoning.reasoning_alignment === \"UNAVAILABLE\" ||\n                          result.phi3_reasoning.reasoning_alignment === \"UNKNOWN\") && \"‚ùì\"}\n                        <span>{result.phi3_reasoning.reasoning_alignment}</span>\n                      </div>\n                      <div className=\"text-xs text-gray-600 mt-2\">\n                        Certainty: {result.phi3_reasoning.reasoning_certainty}\n                      </div>\n                    </div>\n\n                    {/* Medical Reasoning */}\n                    <div className=\"mb-4\">\n                      <div className=\"text-sm font-semibold text-gray-700 mb-2\">\n                        MEDICAL REASONING\n                      </div>\n                      <p className=\"text-sm text-gray-800 leading-relaxed bg-white/50 p-3 rounded-lg\">\n                        {result.phi3_reasoning.reasoning}\n                      </p>\n                    </div>\n\n                    {/* Key Medical Factors */}\n                    {result.phi3_reasoning.key_factors &&\n                      result.phi3_reasoning.key_factors.length > 0 && (\n                        <div>\n                          <div className=\"text-sm font-semibold text-gray-700 mb-2\">\n                            KEY MEDICAL FACTORS\n                          </div>\n                          <ul className=\"space-y-2\">\n                            {result.phi3_reasoning.key_factors.map((factor: string, idx: number) => (\n                              <li key={idx} className=\"flex items-start gap-2 text-sm\">\n                                <span className=\"text-purple-600 mt-1\">‚Ä¢</span>\n                                <span className=\"text-gray-800\">{factor}</span>\n                              </li>\n                            ))}\n                          </ul>\n                        </div>\n                      )}\n\n                    {/* Interpretation Note */}\n                    <div className=\"mt-4 pt-4 border-t border-purple-200\">\n                      <p className=\"text-xs text-gray-600 italic\">\n                        <strong>Note:</strong> Phi-3 provides medical reasoning to help interpret the ML decision.\n                        It does not validate or override the ML classifier's prediction.\n                      </p>\n                    </div>\n                  </div>\n                )}\n\n                {/* FDA Drug Information Card */}\n                {result.drug_info && (\n                  <div className=\"bg-gradient-to-br from-blue-50 to-cyan-50 rounded-lg shadow-sm p-6 border border-blue-100\">\n                    <h3 className=\"text-lg font-bold text-gray-900 mb-4 flex items-center gap-2\">\n                      <span className=\"text-blue-600\"></span>\n                      DRUG INFORMATION ‚Äî {result.drugname}\n                    </h3>\n\n                    <div className=\"text-xs text-gray-500 mb-4\">\n                      SOURCE: {result.drug_info.source}\n                    </div>\n\n                    <div className=\"space-y-4\">\n                      {/* Indications */}\n                      <div>\n                        <h4 className=\"text-sm font-bold text-gray-800 mb-2\">\n                          INDICATIONS\n                        </h4>\n                        <p className=\"text-sm text-gray-700 leading-relaxed\">\n                          {result.drug_info.indications}\n                        </p>\n                      </div>\n\n                      {/* Warnings */}\n                      <div>\n                        <h4 className=\"text-sm font-bold text-gray-800 mb-2\">\n                          KEY WARNINGS\n                        </h4>\n                        <p className=\"text-sm text-gray-700 leading-relaxed\">\n                          {result.drug_info.warnings}\n                        </p>\n                      </div>\n\n                      {/* Adverse Reactions */}\n                      <div>\n                        <h4 className=\"text-sm font-bold text-gray-800 mb-2\">\n                          KNOWN ADVERSE REACTIONS\n                        </h4>\n                        <p className=\"text-sm text-gray-700 leading-relaxed\">\n                          {result.drug_info.adverse_reactions}\n                        </p>\n                      </div>\n                    </div>\n                  </div>\n                )}\n\n                {/* AI Clinical Explanation */}\n                {result.explanation && (\n                  <div className=\"bg-gradient-to-br from-emerald-50 to-teal-50 rounded-lg shadow-sm p-6 border border-emerald-100\">\n                    <h3 className=\"text-lg font-bold text-gray-900 mb-4 flex items-center gap-2\">\n                      <span className=\"text-emerald-600\"></span>\n                      AI CLINICAL SUMMARY\n                    </h3>\n                    <div className=\"prose prose-sm max-w-none\">\n                      <p className=\"text-sm text-gray-800 leading-relaxed whitespace-pre-line\">\n                        {result.explanation}\n                      </p>\n                    </div>\n                  </div>\n                )}\n              </div>\n\n              {/* Right Column - Similar Events */}\n              <div className=\"space-y-6\">\n                {similar.length > 0 && (\n                  <div className=\"bg-white rounded-lg shadow-sm p-6\">\n                    <h3 className=\"text-lg font-bold text-gray-900 mb-4 flex items-center gap-2\">\n                      <span className=\"text-orange-500\"></span>\n                      SIMILAR HISTORICAL EVENTS\n                    </h3>\n                    <p className=\"text-sm text-gray-600 mb-4\">\n                      Found {similar.length} similar escalated case(s) with the same drug. Click any case to view full details.\n                    </p>\n\n                    <div className=\"space-y-4\">\n                      {similar.map((event: any, idx: number) => (\n                        <div\n                          key={idx}\n                          onClick={() => setSelectedEvent(event)}\n                          className=\"border border-gray-200 rounded-lg p-4 hover:border-blue-500 hover:shadow-md cursor-pointer transition\"\n                        >\n                          <div className=\"text-xs font-mono text-gray-500 mb-3 flex items-center justify-between\">\n                            <span>Case ID: {event.report_id}</span>\n                            {event.timestamp && (\n                              <span className=\"text-gray-400\">\n                                {new Date(event.timestamp).toLocaleDateString()}\n                              </span>\n                            )}\n                          </div>\n\n                          <div className=\"space-y-2 text-sm\">\n                            <div>\n                              <span className=\"font-semibold text-gray-700\">Drug:</span>{\" \"}\n                              <span className=\"text-gray-900\">\n                                {event.drugname || result.drugname}\n                              </span>\n                            </div>\n\n                            <div>\n                              <span className=\"font-semibold text-gray-700\">Adverse Event:</span>\n                              <p className=\"text-gray-700 mt-1 line-clamp-3 leading-relaxed\">\n                                {event.adverse_event}\n                              </p>\n                            </div>\n                          </div>\n\n                          <div className=\"mt-3 text-xs text-blue-600 font-medium\">\n                            Click to view full details ‚Üí\n                          </div>\n                        </div>\n                      ))}\n                    </div>\n\n                    {/* Download Button */}\n                    <button\n                      onClick={handleDownload}\n                      className=\"mt-6 w-full bg-blue-600 text-white px-4 py-3 rounded-md font-medium hover:bg-blue-700 transition flex items-center justify-center gap-2\"\n                    >\n                      <span>‚¨á</span>\n                      Download Case Report\n                    </button>\n                  </div>\n                )}\n\n                {/* Placeholder if no similar events */}\n                {similar.length === 0 && (\n                  <div className=\"bg-white rounded-lg shadow-sm p-6\">\n                    <h3 className=\"text-lg font-bold text-gray-900 mb-4 flex items-center gap-2\">\n                      <span className=\"text-gray-400\">üìã</span>\n                      Similar Historical Events\n                    </h3>\n                    <p className=\"text-sm text-gray-500 italic\">\n                      {result.escalation.should_escalate\n                        ? \"No similar historical cases found for this drug.\"\n                        : \"Similar event retrieval only active for escalated serious cases.\"}\n                    </p>\n\n                    {/* Download Button */}\n                    <button\n                      onClick={handleDownload}\n                      className=\"mt-6 w-full bg-blue-600 text-white px-4 py-3 rounded-md font-medium hover:bg-blue-700 transition flex items-center justify-center gap-2\"\n                    >\n                      <span>‚¨á</span>\n                      Download Case Report\n                    </button>\n                  </div>\n                )}\n              </div>\n            </div>\n          </>\n        )}\n      </div>\n\n      {/* Modal: Similar Event Details */}\n      {selectedEvent && (\n        <div\n          className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4\"\n          onClick={() => setSelectedEvent(null)}\n        >\n          <div\n            className=\"bg-white max-w-3xl w-full rounded-lg shadow-2xl max-h-[90vh] overflow-y-auto\"\n            onClick={(e) => e.stopPropagation()}\n          >\n            {/* Modal Header */}\n            <div className=\"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between\">\n              <h3 className=\"text-xl font-bold text-gray-900\">\n                Similar Event Details\n              </h3>\n              <button\n                onClick={() => setSelectedEvent(null)}\n                className=\"text-gray-500 hover:text-gray-900 text-2xl font-bold w-8 h-8 flex items-center justify-center rounded hover:bg-gray-100 transition\"\n              >\n                √ó\n              </button>\n            </div>\n\n            {/* Modal Content */}\n            <div className=\"p-6 space-y-4\">\n              {/* Case ID */}\n              <div className=\"bg-gray-50 rounded-lg p-4\">\n                <div className=\"text-xs font-semibold text-gray-500 mb-1\">CASE REPORT ID</div>\n                <div className=\"text-lg font-mono font-bold text-gray-900\">\n                  {selectedEvent.report_id}\n                </div>\n              </div>\n\n              {/* Drug Name */}\n              <div>\n                <div className=\"text-sm font-semibold text-gray-700 mb-2\">Drug</div>\n                <div className=\"text-base text-gray-900\">\n                  {selectedEvent.drugname || result.drugname}\n                </div>\n              </div>\n\n              {/* Adverse Event */}\n              <div>\n                <div className=\"text-sm font-semibold text-gray-700 mb-2\">Adverse Event Description</div>\n                <div className=\"bg-gray-50 rounded-lg p-4 text-sm text-gray-800 leading-relaxed whitespace-pre-line\">\n                  {selectedEvent.adverse_event}\n                </div>\n              </div>\n\n              {/* Additional Details Grid */}\n              <div className=\"grid grid-cols-2 gap-4\">\n                {selectedEvent.risk_level && (\n                  <div>\n                    <div className=\"text-sm font-semibold text-gray-700 mb-2\">Risk Level</div>\n                    <div className={`${getRiskColor(selectedEvent.risk_level)} text-white px-3 py-1 rounded-full text-sm font-bold inline-block`}>\n                      {selectedEvent.risk_level}\n                    </div>\n                  </div>\n                )}\n\n                {selectedEvent.timestamp && (\n                  <div>\n                    <div className=\"text-sm font-semibold text-gray-700 mb-2\">Date Reported</div>\n                    <div className=\"text-base text-gray-900\">\n                      {new Date(selectedEvent.timestamp).toLocaleDateString()}\n                    </div>\n                  </div>\n                )}\n              </div>\n            </div>\n\n            {/* Modal Footer */}\n            <div className=\"sticky bottom-0 bg-gray-50 border-t border-gray-200 px-6 py-4\">\n              <button\n                onClick={() => setSelectedEvent(null)}\n                className=\"w-full bg-gray-800 text-white px-4 py-3 rounded-md font-medium hover:bg-gray-900 transition\"\n              >\n                Close\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </main>\n  );\n}"],"names":[],"mappings":"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"}}]
}